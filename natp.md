NATP项目环境
===

##项目背景
尝试详细的描述如何使用电视棒跟踪飞机，参见:http://sdr.osmocom.org/trac/wiki/rtl-sdr
###原理概述
    之所以能够很容易的跟踪飞机,是因为航空CNS(通信导航监视)系统里大量采用非常古老的无线标准.因为航空业巨头们建立了一整套适航规定,飞机上任何一点小小的改动若想获得广泛的应用是非常麻烦的,更不要说对CNS系统的升级换代. CNS系统中大量采用脉冲体制以及明文传输,因此我们得以很容易的监听飞机以及地面站发射的信号,并解码.脉冲体制的含义是,通信的基本方式是大功率的脉冲,瞬间功率上千瓦,持续us量级,信息承载在脉冲的位置和相对强度中.
电视棒为何能接收飞机发射的信号?本来他们看起来风马牛不相及的.首先电视棒是能收电视信号的(废话),但能收电视信号不意味着就能收飞机.得益于微电子技术和通信技术的飞速发展,目前接收电视信号(包括模拟电视和数字电视)一般由两颗芯片来完成,一颗称之为tuner,另外一颗为解调器.tuner的作用是将指定频率和带宽的信号进行放大,下变频,滤波等,送给解调器芯片.解调器芯片首先把信号进行A/D采样数字化,而后根据想要接收的电视制式进行相应的运算处理,输出视频码流,声音,数据等电视台播发的信息.

    因为各种系统的工作频率不同,生产tuner的厂家为了使自己的芯片能够一次投产多次使用长期销售,他们将tuner芯片设计的能覆盖很宽的频带并且能设置不同的接收带宽.而后根据用户需求和政府的无线电规则在不同的产品里开启某些频段,禁用某些频段. 如果tuner被破解,那么就有办法开启它所有频段的接收能力,包括在1090MHz上接收信号.

    剩下的就是解调器,电视棒里的解调器当然无法解调飞机发射的信号,但解调器当中对tuner送来的信号进行A/D采样,这个采样功能是解调任何信号所必须的,当然也可以用来解调飞机发射的信号.通过破解电视棒的driver,tuner的信号被解条器进行A/D采样数字化之后被直接通过USB接口送给电脑,使得我们能在电脑上处理原始的tuner信号采样,即用电脑软件担当解调器的任务.加之航空CNS标准是公开的(脉冲位置,相对幅度等),信息是明文的,因此编制解调软件即可正确解调飞机发射的信号了.

    以上用计算机软件进行通信信号解调的方法就是所谓的"软件无线电"(Software Defined Radio -- SDR). 实际上软件无线电技术的研究和开发已经有几十年的历史了,最初源于美军的多制式电台项目. 目前我们日常使用的移动通信系统中其实已经大量使用软件无线电技术, 比如基站中的信号处理大量的使用可编程的FPGA和DSP完成, 比如手机当中的基带处理器也越来越多的采用软解调的方法(少数运算量特别大实时性要求特别高的模块除外,比如turbo解码器,扩频相关器等,这些模块往往在基带处理器中嵌入一些高度定制化"硬"核来实现)
###前期工作参考
   http://blog.sina.com.cn/s/blog_67cdafe201014odm.html
   https://github.com/chuachua1080/Plane

##前端环境
所安装的软件依赖关系比较严重，编译时间很长。
#####下载安装脚本build-gnuradio
   <http://www.sbrac.org/files/build-gnuradio>
   1. 下载源码：./build-gnuradio gitfetch
   2. 安装依赖 脚本：./build-gnuradio prereqs
   3. 按顺序安装
   **注意**
   * 每次编译前将build目录删除或者将CMakeCache.txt删除
   * 安装使用脚本前带上`-v`，可以看到安装完成程度
   * 虚拟机安装的话可以成功安装一个然后创建一个snapshot
   测试
   * 先测试是否能检测到设备
     rtl_eeprom
   * 测试检测飞机
     modes_rx --gain=60 -a --rtlsdr --kml=trace_out.kml
     使用googleEarth或其他类似软件打开trace_out.kml看
##后端环境
后端比较简单  
eclipse + pydev + python2.7 + django1.5.4 + subversion + subclipse1.8

需要注意的就是svnclipse，它需要和系统安装的subversion版本对应[javaHL问题](http://subclipse.tigris.org/wiki/JavaHL)，如何对应：
Subclipse Version

Subclipse Version | SVN/JavaHL Version |
----------------- | ------------------ |
1.10.x            | 1.8.X              |
1.8.X             |1.7.X               |
1.6.X             |1.6.X               |

ubuntu12.04默认安装subversion1.6，所以找一个别的源安装subversion1.7就ok了
   